<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@motioneffector/wiki - Demo</title>
  <link rel="stylesheet" href="demo-files/demo.css">
</head>
<body>
  <div class="page">
    <header class="header">
      <h1 class="header-title">@motioneffector/wiki</h1>
      <p class="header-description">A TypeScript library for creating interconnected knowledge bases with bidirectional linking and graph analysis</p>
      <div class="flex items-center justify-between">
        <nav class="header-links">
          <a href="https://www.npmjs.com/package/@motioneffector/wiki" class="header-link" target="_blank">ðŸ“¦ npm</a>
          <a href="https://github.com/motioneffector/wiki" class="header-link" target="_blank">ðŸ’» GitHub</a>
          <a href="manual/index.html" class="header-link">ðŸ“– Manual</a>
        </nav>
      </div>
    </header>

    <main>
      <!-- Test Runner (FIRST, before exhibits) -->
      <section class="test-runner" id="test-runner">
        <div class="test-runner-header">
          <h2 class="test-runner-title">Test Runner</h2>
        </div>
        <div class="test-runner-content">
          <!-- Control bar: progress bar + buttons -->
          <div class="test-control-bar">
            <div class="test-progress">
              <div class="test-progress-bar">
                <div class="test-progress-fill" id="progress-fill"></div>
              </div>
              <div class="test-progress-text" id="progress-text">Ready</div>
            </div>
            <div class="test-runner-actions">
              <button class="btn btn-primary" id="run-all-tests">
                <span class="btn-icon">â–¶</span>
                <span>Run All Tests</span>
              </button>
              <button class="btn btn-secondary" id="reset-page">
                <span class="btn-icon">â†»</span>
                <span>Reset Page</span>
              </button>
            </div>
          </div>
          <!-- Output console -->
          <div class="test-output" id="test-output">
            <div class="test-output-placeholder">Click "Run All Tests" to execute the test suite and see a live demonstration</div>
          </div>
          <div class="test-summary hidden" id="test-summary"></div>
        </div>
      </section>

      <!-- Exhibit 1: The Living Wiki -->
      <section class="exhibit" id="exhibit-living-wiki">
        <div class="exhibit-header">
          <h2 class="exhibit-title">The Living Wiki</h2>
          <p class="exhibit-description">Pages as cards with visible connection lines. Watch links form as you type [[wikilinks]]. Ghost cards show dead links.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive" id="wiki-canvas">
            <svg id="wiki-connections"></svg>
          </div>
          <div id="wiki-editor">
            <input type="text" id="wiki-editor-title" class="input" placeholder="Page title">
            <textarea id="wiki-editor-content" class="input" placeholder="Page content with [[wikilinks]]"></textarea>
            <div class="flex gap-sm mt-md">
              <button class="btn btn-primary" id="wiki-save-btn">Save</button>
              <button class="btn btn-danger" id="wiki-delete-btn">Delete</button>
            </div>
          </div>
          <div class="exhibit-controls">
            <button class="btn btn-secondary" id="wiki-new-btn">New Page</button>
            <button class="btn btn-secondary" id="wiki-arrange-btn">Auto-arrange</button>
            <button class="btn btn-secondary" id="wiki-reset-btn">Reset</button>
          </div>
        </div>
      </section>

      <!-- Exhibit 2: Graph Explorer -->
      <section class="exhibit" id="exhibit-graph-explorer">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Graph Explorer</h2>
          <p class="exhibit-description">Force-directed physics simulation. Drag nodes to see connections react. Explore page neighborhoods with the depth slider.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive" id="graph-canvas">
            <svg id="graph-svg"></svg>
          </div>
          <div id="graph-info">
            <div class="depth-slider">
              <span class="text-secondary">Depth:</span>
              <input type="range" id="depth-slider" min="0" max="3" value="1">
              <span id="depth-value" class="tag tag-blue">1</span>
            </div>
            <div class="mt-md">
              <span class="text-secondary">Selected:</span>
              <span id="selected-node" class="text-primary">Kingdom of Valdoria</span>
              <span class="text-muted ml-md" id="connected-count">(4 connected at depth 1)</span>
            </div>
          </div>
          <div class="exhibit-controls">
            <button class="btn btn-secondary" id="graph-shake-btn">Shake</button>
            <button class="btn btn-secondary" id="graph-fit-btn">Fit View</button>
            <label class="toggle">
              <input type="checkbox" id="graph-labels-toggle" checked>
              <span class="toggle-switch"></span>
              <span class="toggle-label">Labels</span>
            </label>
          </div>
        </div>
      </section>

      <!-- Exhibit 3: Tag & Type Workshop -->
      <section class="exhibit" id="exhibit-workshop">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Tag & Type Workshop</h2>
          <p class="exhibit-description">Drag pages into type buckets (exclusive) and tag buckets (multiple). Search highlights matching chips across all buckets.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive" id="workshop-container">
            <div class="bucket-section" id="types-section">
              <div class="bucket-section-title">Types (one per page)</div>
              <div id="type-buckets"></div>
              <button class="add-bucket-btn" id="add-type-btn">+ New Type</button>
            </div>
            <div class="bucket-section" id="tags-section">
              <div class="bucket-section-title">Tags (many per page)</div>
              <div id="tag-buckets"></div>
              <button class="add-bucket-btn" id="add-tag-btn">+ New Tag</button>
            </div>
            <div id="workshop-search">
              <input type="text" class="input" id="workshop-search-input" placeholder="Search pages...">
            </div>
          </div>
          <div class="exhibit-controls">
            <button class="btn btn-secondary" id="workshop-reset-btn">Reset</button>
            <label class="toggle">
              <input type="checkbox" id="workshop-untagged-toggle">
              <span class="toggle-switch"></span>
              <span class="toggle-label">Show Untagged</span>
            </label>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Library import -->

  <!-- Demo scripts (order matters) -->
  <script src="demo-files/test-runner.js"></script>
  <script type="module" src="demo-files/demo.js"></script>
  <script type="module" src="demo-files/tests.js"></script>
</body>
</html>
